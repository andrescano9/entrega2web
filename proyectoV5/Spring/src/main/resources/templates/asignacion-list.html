<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Asignaciones</title>
    <link rel="stylesheet" th:href="@{/css/header-Footer.css}">
    <link rel="stylesheet" th:href="@{/css/asignacion-list.css}">
</head>
<body>
    <header>
        <div class="container">
            <p class="logo">TransmiApp</p>
            <nav>
                <a href="/index.html">Inicio</a>
                <a href="/conductor/list">Conductores</a>
                <a href="/conductor/list">Horarios</a>
                <a href="/conductor/list">Rutas</a>
                <a href="/asignacion/list">Asignaciones</a>
            </nav>
        </div>
    </header>

    <section class="asignacion-list">
        <h1>Lista de Asignaciones</h1>

        <!-- Mensaje de error -->
        <div th:if="${errorMessage}" style="color: red; margin-bottom: 20px;">
            <p th:text="${errorMessage}"></p>
        </div>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Bus</th>
                    <th>Conductor</th>
                    <th>Horario</th>
                    <th>Ruta</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="asignacionDTO : ${asignacionesDTO}">
                    <td th:text="${asignacionDTO.id}"></td>
                    <td th:text="${asignacionDTO.busPlaca != null ? asignacionDTO.busPlaca : 'Sin bus asignado'}"></td>
                    <td th:text="${asignacionDTO.conductorNombre != null ? asignacionDTO.conductorNombre : 'Sin conductor asignado'}"></td>
                    <td th:text="${asignacionDTO.horarioInicio != null ? asignacionDTO.horarioInicio : 'Sin horario asignado'}"></td>
                    <td th:text="${asignacionDTO.horarioFin != null ? asignacionDTO.horarioFin : 'Sin horario asignado'}"></td>
                    <td th:text="${asignacionDTO.diaSemana != null ? asignacionDTO.diaSemana : 'Sin día asignado'}"></td>
                    <td th:text="${asignacionDTO.rutaNombre != null ? asignacionDTO.rutaNombre : 'Sin ruta asignada'}"></td>
                    <td>
                        <a th:href="@{/asignacion/view/{id}(id=${asignacionDTO.id})}">Ver</a>
                        <a th:href="@{/asignacion/edit-form/{id}(id=${asignacionDTO.id})}">Editar</a>
                        <form th:action="@{/asignacion/delete/{id}(id=${asignacionDTO.id})}" method="post" style="display:inline;">
                            <button type="submit" onclick="return confirm('¿Estás seguro de que deseas eliminar esta asignación?');">Eliminar</button>
                        </form>
                    </td>
                </tr>
                
            </tbody>
        </table>
        <a href="/asignacion/crear-form">Crear Nueva Asignación</a>
        
        <!-- Botón de Volver al index.html -->
        <div class="back-button">
            <a href="/index.html" class="button">Volver al Inicio</a>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-links">
                <div class="footer-section">
                    <h3>Enlaces Útiles</h3>
                    <ul>
                        <li><a href="/index.html">Inicio</a></li>
                        <li><a href="/conductor/list">Conductores</a></li>
                        <li><a href="/conductor/list">Rutas</a></li>
                        <li><a href="/conductor/list">Horarios</a></li>
                        <li><a href="/asignacion/list">Asignaciones</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p>Email: <a href="mailto:info@transmiapp.com">info@transmiapp.com</a></p>
                    <p>Teléfono: +57 123 456 7890</p>
                </div>
                <div class="footer-section">
                    <h3>Síguenos</h3>
                    <div class="social-links">
                        <a href="https://facebook.com" target="_blank">Facebook</a>
                        <a href="https://twitter.com" target="_blank">Twitter</a>
                        <a href="https://instagram.com" target="_blank">Instagram</a>
                    </div>
                </div>
                <div class="footer-section">
                    <p>&copy; TransmiApp 2024</p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
